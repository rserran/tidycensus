<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Other Census Bureau datasets • tidycensus</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Other Census Bureau datasets">
<meta property="og:description" content="tidycensus">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidycensus</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basic-usage.html">Basic usage of tidycensus</a>
    </li>
    <li>
      <a href="../articles/spatial-data.html">Spatial data in tidycensus</a>
    </li>
    <li>
      <a href="../articles/margins-of-error.html">Margins of error in the ACS</a>
    </li>
    <li>
      <a href="../articles/other-datasets.html">Other Census Bureau datasets</a>
    </li>
    <li>
      <a href="../articles/pums-data.html">Working with Census microdata</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/walkerke/tidycensus" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Other Census Bureau datasets</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/walkerke/tidycensus/blob/HEAD/vignettes/other-datasets.Rmd" class="external-link"><code>vignettes/other-datasets.Rmd</code></a></small>
      <div class="hidden name"><code>other-datasets.Rmd</code></div>

    </div>

    
    
<p>The main intent of the tidycensus package is to return population
characteristics of the United States in tidy format allowing for
integration with simple feature geometries. Its intent is not, and has
never been, to wrap the universe of APIs and datasets available from the
US Census Bureau. For datasets not included in tidycensus, I recommend
Hannah Recht’s <strong>censusapi</strong> package (<a href="https://github.com/hrecht/censusapi" class="external-link uri">https://github.com/hrecht/censusapi</a>), which allows R
users to access all Census APIs, and packages such as Jamaal Green’s
<strong>lehdr</strong> package (<a href="https://github.com/jamgreen/lehdr" class="external-link uri">https://github.com/jamgreen/lehdr</a>) which grants R users
access to Census Bureau LODES data.</p>
<p>However, tidycensus incorporates a select number of Census Bureau
datasets outside the decennial Census and ACS that are aligned with the
basic goals of the package. One such dataset is the <a href="https://www.census.gov/data/developers/data-sets/popest-popproj/popest.html" class="external-link"><strong>Population
Estimates API</strong></a>, which includes information on a wide variety
of population characteristics that is updated annually. Also available
through tidycensus is the <a href="https://www.census.gov/data/developers/data-sets/acs-migration-flows.html" class="external-link"><strong>Migration
Flows API</strong></a>, which estimates the number of people that have
moved between pairs of places in a given year.</p>
<div class="section level2">
<h2 id="population-estimates">Population estimates<a class="anchor" aria-label="anchor" href="#population-estimates"></a>
</h2>
<p>Population estimates are available in tidycensus through the
<code><a href="../reference/get_estimates.html">get_estimates()</a></code> function. Estimates are organized into
<strong>products</strong>, which in tidycensus include
<code>"population"</code>, <code>"components"</code>,
<code>"housing"</code>, and <code>"characteristics"</code>. The
population and housing products contain population/density and housing
unit estimates, respectively. The components of change and
characteristics products, in contrast, include a wider range of possible
variables.</p>
<div class="section level3">
<h3 id="components-of-change-population-estimates">Components of change population estimates<a class="anchor" aria-label="anchor" href="#components-of-change-population-estimates"></a>
</h3>
<p>By default, specifying <code>"population"</code>,
<code>"components"</code>, or <code>"housing"</code> as the
<code>product</code> in <code><a href="../reference/get_estimates.html">get_estimates()</a></code> returns all
variables associated with that component. For example, we can request
all components of change variables for US states in 2019:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://walker-data.com/tidycensus/" class="external-link">tidycensus</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/walkerke/tigris" class="external-link">tigris</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>tigris_use_cache <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="va">us_components</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_estimates.html">get_estimates</a></span><span class="op">(</span>geography <span class="op">=</span> <span class="st">"state"</span>, product <span class="op">=</span> <span class="st">"components"</span><span class="op">)</span>

<span class="va">us_components</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 624 × 4</span></span>
<span class="co">##    NAME           GEOID variable  value</span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span> Mississippi    28    BIRTHS    <span style="text-decoration: underline;">35</span>978</span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span> Missouri       29    BIRTHS    <span style="text-decoration: underline;">71</span>297</span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span> Montana        30    BIRTHS    <span style="text-decoration: underline;">11</span>618</span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span> Nebraska       31    BIRTHS    <span style="text-decoration: underline;">25</span>343</span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span> Nevada         32    BIRTHS    <span style="text-decoration: underline;">35</span>932</span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span> New Hampshire  33    BIRTHS    <span style="text-decoration: underline;">12</span>004</span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span> New Jersey     34    BIRTHS    <span style="text-decoration: underline;">99</span>501</span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span> New Mexico     35    BIRTHS    <span style="text-decoration: underline;">23</span>125</span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span> New York       36    BIRTHS   <span style="text-decoration: underline;">222</span>924</span>
<span class="co">## <span style="color: #BCBCBC;">10</span> North Carolina 37    BIRTHS   <span style="text-decoration: underline;">119</span>203</span>
<span class="co">## <span style="color: #949494;"># ℹ 614 more rows</span></span></code></pre>
<p>The variables included in the components of change product consist of
both estimates of <em>counts</em> and <em>rates</em>. Rates are preceded
by an <code>R</code> in the variable name and are calculated per 1000
residents.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">us_components</span><span class="op">$</span><span class="va">variable</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##  [1] "BIRTHS"            "DEATHS"            "DOMESTICMIG"      </span>
<span class="co">##  [4] "INTERNATIONALMIG"  "NATURALINC"        "NETMIG"           </span>
<span class="co">##  [7] "RBIRTH"            "RDEATH"            "RDOMESTICMIG"     </span>
<span class="co">## [10] "RINTERNATIONALMIG" "RNATURALINC"       "RNETMIG"</span></code></pre>
<p>Available geographies include <code>"us"</code>,
<code>"state"</code>, <code>"county"</code>,
<code>"metropolitan statistical area/micropolitan statistical area"</code>,
and <code>"combined statistical area"</code>.</p>
<p>If desired, users can request a specific component or components by
supplying a character vector to the <code>variables</code> parameter, as
in other tidycensus functions. <code><a href="../reference/get_estimates.html">get_estimates()</a></code> also
supports simple feature geometry integration to facilitate mapping. In
the example below, we’ll acquire data on the net migration rate between
2018 and 2019 for all counties in the United States. We’ll also use the
<code><a href="https://rdrr.io/pkg/tigris/man/shift_geometry.html" class="external-link">shift_geometry()</a></code> function from the <strong>tigris</strong>
package to shift and rescale counties outside the continental US for
national mapping.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">net_migration</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_estimates.html">get_estimates</a></span><span class="op">(</span>geography <span class="op">=</span> <span class="st">"county"</span>,
                               variables <span class="op">=</span> <span class="st">"RNETMIG"</span>,
                               year <span class="op">=</span> <span class="fl">2019</span>,
                               geometry <span class="op">=</span> <span class="cn">TRUE</span>,
                               resolution <span class="op">=</span> <span class="st">"20m"</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/tigris/man/tigris-exports.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/tigris/man/shift_geometry.html" class="external-link">shift_geometry</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">net_migration</span></code></pre></div>
<pre><code><span class="co">## Simple feature collection with 3142 features and 4 fields</span>
<span class="co">## Geometry type: GEOMETRY</span>
<span class="co">## Dimension:     XY</span>
<span class="co">## Bounding box:  xmin: -3112200 ymin: -1697728 xmax: 2258154 ymax: 1558935</span>
<span class="co">## Projected CRS: USA_Contiguous_Albers_Equal_Area_Conic</span>
<span class="co">## <span style="color: #949494;"># A tibble: 3,142 × 5</span></span>
<span class="co">##    GEOID NAME                         variable  value                   geometry</span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;MULTIPOLYGON [m]&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span> 29227 Worth County, Missouri       RNETMIG   -<span style="color: #BB0000;">8.91</span> (((114835.6 345071.6, 123…</span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span> 31061 Franklin County, Nebraska    RNETMIG  -<span style="color: #BB0000;">14.4</span>  (((-267685.1 323958.5, -2…</span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span> 36013 Chautauqua County, New York  RNETMIG   -<span style="color: #BB0000;">3.54</span> (((1324221 647717.4, 1334…</span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span> 37181 Vance County, North Carolina RNETMIG   -<span style="color: #BB0000;">3.25</span> (((1544260 32202.52, 1547…</span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span> 47183 Weakley County, Tennessee    RNETMIG   -<span style="color: #BB0000;">1.02</span> (((625934.5 -98887.34, 63…</span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span> 44003 Kent County, Rhode Island    RNETMIG    2.29 (((1977965 726702.3, 2004…</span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span> 08101 Pueblo County, Colorado      RNETMIG    6.15 (((-783174.5 122269, -773…</span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span> 17175 Stark County, Illinois       RNETMIG  -<span style="color: #BB0000;">10.6</span>  (((500559 424779.4, 51023…</span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span> 29169 Pulaski County, Missouri     RNETMIG    4.42 (((312851.7 46166.36, 312…</span>
<span class="co">## <span style="color: #BCBCBC;">10</span> 19151 Pocahontas County, Iowa      RNETMIG  -<span style="color: #BB0000;">12.2</span>  (((88185.95 606331.9, 126…</span>
<span class="co">## <span style="color: #949494;"># ℹ 3,132 more rows</span></span></code></pre>
<p>We’ll next use tidyverse tools to generate a <code>groups</code>
column that bins the net migration rates into comprehensible categories,
and plot the result using <code><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf()</a></code> and ggplot2.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">order</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"-15 and below"</span>, <span class="st">"-15 to -5"</span>, <span class="st">"-5 to +5"</span>, <span class="st">"+5 to +15"</span>, <span class="st">"+15 and up"</span><span class="op">)</span>

<span class="va">net_migration</span> <span class="op">&lt;-</span> <span class="va">net_migration</span> <span class="op"><a href="https://rdrr.io/pkg/tigris/man/tigris-exports.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>groups <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span>
    <span class="va">value</span> <span class="op">&gt;</span> <span class="fl">15</span> <span class="op">~</span> <span class="st">"+15 and up"</span>,
    <span class="va">value</span> <span class="op">&gt;</span> <span class="fl">5</span> <span class="op">~</span> <span class="st">"+5 to +15"</span>,
    <span class="va">value</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">5</span> <span class="op">~</span> <span class="st">"-5 to +5"</span>,
    <span class="va">value</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">15</span> <span class="op">~</span> <span class="st">"-15 to -5"</span>,
    <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"-15 and below"</span>
  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/tigris/man/tigris-exports.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">groups</span>, levels <span class="op">=</span> <span class="va">order</span><span class="op">)</span><span class="op">)</span>

<span class="va">state_overlay</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tigris/man/states.html" class="external-link">states</a></span><span class="op">(</span>
  cb <span class="op">=</span> <span class="cn">TRUE</span>,
  resolution <span class="op">=</span> <span class="st">"20m"</span>
<span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/tigris/man/tigris-exports.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">GEOID</span> <span class="op">!=</span> <span class="st">"72"</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/tigris/man/tigris-exports.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/tigris/man/shift_geometry.html" class="external-link">shift_geometry</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">net_migration</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">groups</span>, color <span class="op">=</span> <span class="va">groups</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">state_overlay</span>, fill <span class="op">=</span> <span class="cn">NA</span>, color <span class="op">=</span> <span class="st">"black"</span>, size <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"PuOr"</span>, direction <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_color_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"PuOr"</span>, direction <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, guide <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>datum <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span>base_family <span class="op">=</span> <span class="st">"Roboto"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Net migration per 1000 residents by county"</span>,
       subtitle <span class="op">=</span> <span class="st">"US Census Bureau 2019 Population Estimates"</span>,
       fill <span class="op">=</span> <span class="st">"Rate"</span>,
       caption <span class="op">=</span> <span class="st">"Data acquired with the R tidycensus package | @kyle_e_walker"</span><span class="op">)</span></code></pre></div>
<p><img src="other-datasets_files/figure-html/unnamed-chunk-4-1.png" width="768"></p>
</div>
<div class="section level3">
<h3 id="estimates-of-population-characteristics">Estimates of population characteristics<a class="anchor" aria-label="anchor" href="#estimates-of-population-characteristics"></a>
</h3>
<p>The fourth population estimates product available in
<code><a href="../reference/get_estimates.html">get_estimates()</a></code>, <code>"characteristics"</code>, is
formatted differently than the other three. It returns population
estimates broken down by categories of <code>AGEGROUP</code>,
<code>SEX</code>, <code>RACE</code>, and <code>HISP</code>, for Hispanic
origin. Requested breakdowns should be specified as a character vector
supplied to the <code>breakdown</code> parameter when the
<code>product</code> is set to <code>"characteristics"</code>.</p>
<p>By default, the returned categories are formatted as integers that
map onto the Census Bureau definitions explained here: <a href="https://www.census.gov/data/developers/data-sets/popest-popproj/popest/popest-vars/2017.html" class="external-link uri">https://www.census.gov/data/developers/data-sets/popest-popproj/popest/popest-vars/2017.html</a>.
However, by specifying <code>breakdown_labels = TRUE</code>, the
function will return the appropriate labels instead. For example:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">la_age_hisp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_estimates.html">get_estimates</a></span><span class="op">(</span>geography <span class="op">=</span> <span class="st">"county"</span>, 
                             product <span class="op">=</span> <span class="st">"characteristics"</span>, 
                             breakdown <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SEX"</span>, <span class="st">"AGEGROUP"</span>, <span class="st">"HISP"</span><span class="op">)</span>,  
                             breakdown_labels <span class="op">=</span> <span class="cn">TRUE</span>, 
                             state <span class="op">=</span> <span class="st">"CA"</span>, 
                             county <span class="op">=</span> <span class="st">"Los Angeles"</span><span class="op">)</span>

<span class="va">la_age_hisp</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 210 × 6</span></span>
<span class="co">##    GEOID NAME                              value SEX        AGEGROUP       HISP </span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span> 06037 Los Angeles County, California 10<span style="text-decoration: underline;">039</span>107 Both sexes All ages       Both…</span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span> 06037 Los Angeles County, California  5<span style="text-decoration: underline;">157</span>137 Both sexes All ages       Non-…</span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span> 06037 Los Angeles County, California  4<span style="text-decoration: underline;">881</span>970 Both sexes All ages       Hisp…</span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span> 06037 Los Angeles County, California   <span style="text-decoration: underline;">579</span>856 Both sexes Age 0 to 4 ye… Both…</span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span> 06037 Los Angeles County, California   <span style="text-decoration: underline;">236</span>459 Both sexes Age 0 to 4 ye… Non-…</span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span> 06037 Los Angeles County, California   <span style="text-decoration: underline;">343</span>397 Both sexes Age 0 to 4 ye… Hisp…</span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span> 06037 Los Angeles County, California   <span style="text-decoration: underline;">600</span>191 Both sexes Age 5 to 9 ye… Both…</span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span> 06037 Los Angeles County, California   <span style="text-decoration: underline;">229</span>438 Both sexes Age 5 to 9 ye… Non-…</span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span> 06037 Los Angeles County, California   <span style="text-decoration: underline;">370</span>753 Both sexes Age 5 to 9 ye… Hisp…</span>
<span class="co">## <span style="color: #BCBCBC;">10</span> 06037 Los Angeles County, California   <span style="text-decoration: underline;">601</span>542 Both sexes Age 10 to 14 … Both…</span>
<span class="co">## <span style="color: #949494;"># ℹ 200 more rows</span></span></code></pre>
<p>With some additional data wrangling, the returned format facilitates
analysis and visualization. For example, we can compare population
pyramids for Hispanic and non-Hispanic populations in Los Angeles
County:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">compare</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">la_age_hisp</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">AGEGROUP</span>, <span class="st">"^Age"</span><span class="op">)</span>, 
                  <span class="va">HISP</span> <span class="op">!=</span> <span class="st">"Both Hispanic Origins"</span>, 
                  <span class="va">SEX</span> <span class="op">!=</span> <span class="st">"Both sexes"</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/tigris/man/tigris-exports.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">SEX</span> <span class="op">==</span> <span class="st">"Male"</span>, <span class="op">-</span><span class="va">value</span>, <span class="va">value</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">compare</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">AGEGROUP</span>, y <span class="op">=</span> <span class="va">value</span>, fill <span class="op">=</span> <span class="va">SEX</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, width <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span>base_family <span class="op">=</span> <span class="st">"Roboto"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">y</span> <span class="op">/</span> <span class="fl">1000</span><span class="op">)</span>, <span class="st">"k"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_x_discrete</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"Age | years"</span>, <span class="st">""</span>, <span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"darkred"</span>, <span class="st">"navy"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">HISP</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, 
       y <span class="op">=</span> <span class="st">"2019 Census Bureau population estimate"</span>, 
       title <span class="op">=</span> <span class="st">"Population structure by Hispanic origin"</span>, 
       subtitle <span class="op">=</span> <span class="st">"Los Angeles County, California"</span>, 
       fill <span class="op">=</span> <span class="st">""</span>, 
       caption <span class="op">=</span> <span class="st">"Data source: US Census Bureau population estimates &amp; tidycensus R package"</span><span class="op">)</span></code></pre></div>
<p><img src="other-datasets_files/figure-html/unnamed-chunk-6-1.png" width="768"></p>
</div>
</div>
<div class="section level2">
<h2 id="migration-flows">Migration flows<a class="anchor" aria-label="anchor" href="#migration-flows"></a>
</h2>
<p>The American Community Survey Migration Flows dataset estimates the
number of people that have moved between pairs of places. The estimates
are calculated based on where a person lived when surveyed and where
they lived one year prior to being surveyed. The data is available at
three geographic levels: county, county subdivision (minor civil
division), and metropolitan statistical area (MSA). Because the number
of movers may be small for some pairs of counties, the data is
aggregated over a five-year period. The estimates for each five-year
period represent the number of people that moved between places <em>each
year</em> during that period.</p>
<p>The data is set up such that for each county, you can find the number
of people that <em>moved to</em> that county from each of the other
counties in the US as well as the number of people that <em>moved
from</em> that county to each of the other counties. The net migration
for each pair of counties is also provided (although this is simply the
moved to minus moved from).</p>
<div class="section level3">
<h3 id="using-get_flows">Using <code>get_flows()</code><a class="anchor" aria-label="anchor" href="#using-get_flows"></a>
</h3>
<p>The <code><a href="../reference/get_flows.html">get_flows()</a></code> function from tidycensus provides access
to these estimates. The only required argument for
<code><a href="../reference/get_flows.html">get_flows()</a></code> is <code>geography</code>, which can be set to
<code>"county"</code>, <code>"county subdivision"</code>, or
<code>"metropolitan statistical area"</code>. If geography is set to
<code>"county"</code> and no other arguments are set, data for all pairs
of counties is pulled from the Census API. This is a large data request
as it will get all combinations of counties that had movers. More
commonly, you might be interested in knowing the flows in and out of one
county, county subdivision, or MSA. In this case, you can specify the
state and county or MSA.</p>
<p>Here we get county-to-county flow data for Westchester County,
NY:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wch_flows</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_flows.html">get_flows</a></span><span class="op">(</span>
  geography <span class="op">=</span> <span class="st">"county"</span>,
  state <span class="op">=</span> <span class="st">"NY"</span>,
  county <span class="op">=</span> <span class="st">"Westchester"</span>,
  year <span class="op">=</span> <span class="fl">2018</span>
  <span class="op">)</span>

<span class="va">wch_flows</span> <span class="op"><a href="https://rdrr.io/pkg/tigris/man/tigris-exports.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">GEOID2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/tigris/man/tigris-exports.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 6 × 7</span></span>
<span class="co">##   GEOID1 GEOID2 FULL1_NAME                   FULL2_NAME  variable estimate   moe</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> 36119  01089  Westchester County, New York Madison Co… MOVEDIN         0    28</span>
<span class="co">## <span style="color: #BCBCBC;">2</span> 36119  01089  Westchester County, New York Madison Co… MOVEDOUT       26    41</span>
<span class="co">## <span style="color: #BCBCBC;">3</span> 36119  01089  Westchester County, New York Madison Co… MOVEDNET      -<span style="color: #BB0000;">26</span>    41</span>
<span class="co">## <span style="color: #BCBCBC;">4</span> 36119  01095  Westchester County, New York Marshall C… MOVEDIN         0    28</span>
<span class="co">## <span style="color: #BCBCBC;">5</span> 36119  01095  Westchester County, New York Marshall C… MOVEDOUT       35    55</span>
<span class="co">## <span style="color: #BCBCBC;">6</span> 36119  01095  Westchester County, New York Marshall C… MOVEDNET      -<span style="color: #BB0000;">35</span>    55</span></code></pre>
<p>With the default setting of <code><a href="../reference/get_flows.html">get_flows()</a></code>, data is
returned in a “tidy” or long format. Notice that for each pair of
places, there are three rows returned with one row for each variable
(<code>MOVEDIN</code>, <code>MOVEDOUT</code>, and <code>MOVEDNET</code>)
and the the estimate and margin of error for these variables are in
columns. <code>GEOID1</code> and <code>FULL1_NAME</code> are the FIPS
code and name of the origin county. In this case, it will also be
Westchester County since that is the only county we requested.
<code>GEOID2</code> and <code>FULL2_NAME</code> are the FIPS code and
name of the destination county.</p>
<p>One simple question we can answer with this data is, to which county
did the most people move from Westchester?</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wch_flows</span> <span class="op"><a href="https://rdrr.io/pkg/tigris/man/tigris-exports.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">variable</span> <span class="op">==</span> <span class="st">"MOVEDOUT"</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/tigris/man/tigris-exports.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">estimate</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/tigris/man/tigris-exports.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 6 × 7</span></span>
<span class="co">##   GEOID1 GEOID2 FULL1_NAME                   FULL2_NAME  variable estimate   moe</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> 36119  09001  Westchester County, New York Fairfield … MOVEDOUT     <span style="text-decoration: underline;">3</span>916   778</span>
<span class="co">## <span style="color: #BCBCBC;">2</span> 36119  36061  Westchester County, New York New York C… MOVEDOUT     <span style="text-decoration: underline;">3</span>328   596</span>
<span class="co">## <span style="color: #BCBCBC;">3</span> 36119  36005  Westchester County, New York Bronx Coun… MOVEDOUT     <span style="text-decoration: underline;">2</span>063   418</span>
<span class="co">## <span style="color: #BCBCBC;">4</span> 36119  36027  Westchester County, New York Dutchess C… MOVEDOUT     <span style="text-decoration: underline;">1</span>870   454</span>
<span class="co">## <span style="color: #BCBCBC;">5</span> 36119  36079  Westchester County, New York Putnam Cou… MOVEDOUT     <span style="text-decoration: underline;">1</span>318   324</span>
<span class="co">## <span style="color: #BCBCBC;">6</span> 36119  36081  Westchester County, New York Queens Cou… MOVEDOUT     <span style="text-decoration: underline;">1</span>082   240</span></code></pre>
<p>The <code>MOVEDOUT</code> variable only estimates the number of
people that moved out of Westchester County and doesn’t account for the
number of people that moved in to Westchester from each county. If you
are interested in net migration (moved in - moved out), you can use the
<code>MOVEDNET</code> variable.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wch_flows</span> <span class="op"><a href="https://rdrr.io/pkg/tigris/man/tigris-exports.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">variable</span> <span class="op">==</span> <span class="st">"MOVEDNET"</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/tigris/man/tigris-exports.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">estimate</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/tigris/man/tigris-exports.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 6 × 7</span></span>
<span class="co">##   GEOID1 GEOID2 FULL1_NAME                   FULL2_NAME  variable estimate   moe</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> 36119  09001  Westchester County, New York Fairfield … MOVEDNET    -<span style="color: #BB0000; text-decoration: underline;">1</span><span style="color: #BB0000;">768</span>   958</span>
<span class="co">## <span style="color: #BCBCBC;">2</span> 36119  36027  Westchester County, New York Dutchess C… MOVEDNET    -<span style="color: #BB0000; text-decoration: underline;">1</span><span style="color: #BB0000;">119</span>   497</span>
<span class="co">## <span style="color: #BCBCBC;">3</span> 36119  06037  Westchester County, New York Los Angele… MOVEDNET     -<span style="color: #BB0000;">486</span>   339</span>
<span class="co">## <span style="color: #BCBCBC;">4</span> 36119  12099  Westchester County, New York Palm Beach… MOVEDNET     -<span style="color: #BB0000;">450</span>   182</span>
<span class="co">## <span style="color: #BCBCBC;">5</span> 36119  25021  Westchester County, New York Norfolk Co… MOVEDNET     -<span style="color: #BB0000;">358</span>   351</span>
<span class="co">## <span style="color: #BCBCBC;">6</span> 36119  36079  Westchester County, New York Putnam Cou… MOVEDNET     -<span style="color: #BB0000;">340</span>   407</span></code></pre>
<p>You may have noticed that there are some destination geographies that
are not other counties. For people that moved into to Westchester from
outside the United States, the Migration Flows data reports the region
that they moved from, such as Africa or Asia. Since this dataset is
based on the American Community Survey, there is no way of knowing how
many people moved out of the United States, so for all pairs of US to
non-US places, the value of <code>MOVEDOUT</code> and
<code>MOVEDNET</code> is <code>NA</code>. The <code>GEOID</code> of
non-US places is also <code>NA</code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wch_flows</span> <span class="op"><a href="https://rdrr.io/pkg/tigris/man/tigris-exports.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">GEOID2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/tigris/man/tigris-exports.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 6 × 7</span></span>
<span class="co">##   GEOID1 GEOID2 FULL1_NAME                   FULL2_NAME variable estimate   moe</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> 36119  <span style="color: #BB0000;">NA</span>     Westchester County, New York Africa     MOVEDIN       419   411</span>
<span class="co">## <span style="color: #BCBCBC;">2</span> 36119  <span style="color: #BB0000;">NA</span>     Westchester County, New York Africa     MOVEDOUT       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span>
<span class="co">## <span style="color: #BCBCBC;">3</span> 36119  <span style="color: #BB0000;">NA</span>     Westchester County, New York Africa     MOVEDNET       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span>
<span class="co">## <span style="color: #BCBCBC;">4</span> 36119  <span style="color: #BB0000;">NA</span>     Westchester County, New York Asia       MOVEDIN      <span style="text-decoration: underline;">2</span>267   436</span>
<span class="co">## <span style="color: #BCBCBC;">5</span> 36119  <span style="color: #BB0000;">NA</span>     Westchester County, New York Asia       MOVEDOUT       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span>
<span class="co">## <span style="color: #BCBCBC;">6</span> 36119  <span style="color: #BB0000;">NA</span>     Westchester County, New York Asia       MOVEDNET       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="demographic-characteristics">Demographic characteristics<a class="anchor" aria-label="anchor" href="#demographic-characteristics"></a>
</h3>
<p>Datasets between 2006-2010 and 2011-2015 have the ability to cross
flow data with selected demographic characteristics such as age, race,
employment status. For instance, the following call will get the number
of movers to and from the Los Angeles-Long Beach Metro Area by race.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">la_flows</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_flows.html">get_flows</a></span><span class="op">(</span>
  geography <span class="op">=</span> <span class="st">"metropolitan statistical area"</span>,
  breakdown <span class="op">=</span> <span class="st">"RACE"</span>,
  breakdown_labels <span class="op">=</span> <span class="cn">TRUE</span>,
  msa <span class="op">=</span> <span class="fl">31080</span>,   <span class="co"># los angeles msa fips code</span>
  year <span class="op">=</span> <span class="fl">2015</span>
  <span class="op">)</span>

<span class="co"># net migration between la and san francisco</span>
<span class="va">la_flows</span> <span class="op"><a href="https://rdrr.io/pkg/tigris/man/tigris-exports.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">FULL2_NAME</span>, <span class="st">"San Fran"</span><span class="op">)</span>, <span class="va">variable</span> <span class="op">==</span> <span class="st">"MOVEDNET"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 5 × 9</span></span>
<span class="co">##   GEOID1 GEOID2 FULL1_NAME   FULL2_NAME RACE  RACE_label variable estimate   moe</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> 31080  41860  Los Angeles… San Franc… 00    All races  MOVEDNET    -<span style="color: #BB0000; text-decoration: underline;">2</span><span style="color: #BB0000;">433</span>  <span style="text-decoration: underline;">1</span>585</span>
<span class="co">## <span style="color: #BCBCBC;">2</span> 31080  41860  Los Angeles… San Franc… 01    White alo… MOVEDNET    -<span style="color: #BB0000; text-decoration: underline;">1</span><span style="color: #BB0000;">077</span>  <span style="text-decoration: underline;">1</span>096</span>
<span class="co">## <span style="color: #BCBCBC;">3</span> 31080  41860  Los Angeles… San Franc… 02    Black or … MOVEDNET       98   378</span>
<span class="co">## <span style="color: #BCBCBC;">4</span> 31080  41860  Los Angeles… San Franc… 03    Asian alo… MOVEDNET     -<span style="color: #BB0000;">580</span>   778</span>
<span class="co">## <span style="color: #BCBCBC;">5</span> 31080  41860  Los Angeles… San Franc… 04    Other rac… MOVEDNET     -<span style="color: #BB0000;">874</span>   549</span></code></pre>
<p>Note that the demographic characteristics must be specified in the
<code>breakdown</code> argument of <code><a href="../reference/get_flows.html">get_flows()</a></code> (not the
<code>variable</code> argument). For each dataset there are three or
four demographic characteristics to choose from. For more information
and to see which characteristics are available in each year, visit the
<a href="https://www.census.gov/data/developers/data-sets/acs-migration-flows.html" class="external-link">Census
Migration Flows documentation</a>.</p>
</div>
<div class="section level3">
<h3 id="mapping-migration-flows">Mapping migration flows<a class="anchor" aria-label="anchor" href="#mapping-migration-flows"></a>
</h3>
<p>An additional feature of <code><a href="../reference/get_flows.html">get_flows()</a></code> is an option to
return spatial data associated with each place. In contrast to other
spatial data available through tidycensus, <code><a href="../reference/get_flows.html">get_flows()</a></code>
returns point rather than polygon geometry. To get geometry with the
flows data, set <code>geometry = TRUE</code>. The return of
<code><a href="../reference/get_flows.html">get_flows()</a></code> will now be an <strong>sf</strong> object with
the centroids of both origin and destination as <code>sfc_POINT</code>
columns. The origin point feature is returned in a column named
<code>centroid1</code> and is the active geometry column in the sf
object. The destination point feature is returned in the
<code>centroid2</code> column.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">phx_flows</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_flows.html">get_flows</a></span><span class="op">(</span>
  geography <span class="op">=</span> <span class="st">"metropolitan statistical area"</span>,
  msa <span class="op">=</span> <span class="fl">38060</span>,
  year <span class="op">=</span> <span class="fl">2018</span>,
  geometry <span class="op">=</span> <span class="cn">TRUE</span>
  <span class="op">)</span>

<span class="va">phx_flows</span> <span class="op"><a href="https://rdrr.io/pkg/tigris/man/tigris-exports.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Simple feature collection with 6 features and 7 fields</span>
<span class="co">## Active geometry column: centroid1</span>
<span class="co">## Geometry type: POINT</span>
<span class="co">## Dimension:     XY</span>
<span class="co">## Bounding box:  xmin: -112.0705 ymin: 33.18571 xmax: -112.0705 ymax: 33.18571</span>
<span class="co">## Geodetic CRS:  NAD83</span>
<span class="co">## <span style="color: #949494;"># A tibble: 6 × 9</span></span>
<span class="co">##   GEOID1 GEOID2 FULL1_NAME                    FULL2_NAME variable estimate   moe</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> 38060  <span style="color: #BB0000;">NA</span>     Phoenix-Mesa-Scottsdale, AZ … Outside M… MOVEDIN     <span style="text-decoration: underline;">21</span>602  <span style="text-decoration: underline;">1</span>464</span>
<span class="co">## <span style="color: #BCBCBC;">2</span> 38060  <span style="color: #BB0000;">NA</span>     Phoenix-Mesa-Scottsdale, AZ … Outside M… MOVEDOUT    <span style="text-decoration: underline;">21</span>192  <span style="text-decoration: underline;">1</span>559</span>
<span class="co">## <span style="color: #BCBCBC;">3</span> 38060  <span style="color: #BB0000;">NA</span>     Phoenix-Mesa-Scottsdale, AZ … Outside M… MOVEDNET      410  <span style="text-decoration: underline;">2</span>186</span>
<span class="co">## <span style="color: #BCBCBC;">4</span> 38060  <span style="color: #BB0000;">NA</span>     Phoenix-Mesa-Scottsdale, AZ … Africa     MOVEDIN      <span style="text-decoration: underline;">1</span>078   385</span>
<span class="co">## <span style="color: #BCBCBC;">5</span> 38060  <span style="color: #BB0000;">NA</span>     Phoenix-Mesa-Scottsdale, AZ … Africa     MOVEDOUT       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span>
<span class="co">## <span style="color: #BCBCBC;">6</span> 38060  <span style="color: #BB0000;">NA</span>     Phoenix-Mesa-Scottsdale, AZ … Africa     MOVEDNET       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span>
<span class="co">## <span style="color: #949494;"># ℹ 2 more variables: centroid1 &lt;POINT [°]&gt;, centroid2 &lt;POINT [°]&gt;</span></span></code></pre>
<p>With the centroids attached to each pair of places, it is
straightforward to map the migration flows. Here, we look at the most
common origin MSAs for people moving to Phoenix-Mesa-Scottsdale, AZ. To
make an interactive map of the flows, we’ll use the excellent <a href="https://symbolixau.github.io/mapdeck/articles/mapdeck.html" class="external-link"><strong>mapdeck</strong>
package</a>. To use mapdeck, you’ll need a <a href="https://docs.mapbox.com/help/getting-started/access-tokens/" class="external-link">Mapbox
account and access token</a>.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://symbolixau.github.io/mapdeck/articles/mapdeck.html" class="external-link">mapdeck</a></span><span class="op">)</span>

<span class="va">top_move_in</span> <span class="op">&lt;-</span> <span class="va">phx_flows</span> <span class="op"><a href="https://rdrr.io/pkg/mapdeck/man/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">GEOID2</span><span class="op">)</span>, <span class="va">variable</span> <span class="op">==</span> <span class="st">"MOVEDIN"</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/mapdeck/man/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_max</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">25</span>, order_by <span class="op">=</span> <span class="va">estimate</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/mapdeck/man/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>
    width <span class="op">=</span> <span class="va">estimate</span> <span class="op">/</span> <span class="fl">500</span>,
    tooltip <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span>
      <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/comma.html" class="external-link">comma</a></span><span class="op">(</span><span class="va">estimate</span> <span class="op">*</span> <span class="fl">5</span>, <span class="fl">1</span><span class="op">)</span>,
      <span class="st">" people moved from "</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html" class="external-link">str_remove</a></span><span class="op">(</span><span class="va">FULL2_NAME</span>, <span class="st">"Metro Area"</span><span class="op">)</span>,
      <span class="st">" to "</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html" class="external-link">str_remove</a></span><span class="op">(</span><span class="va">FULL1_NAME</span>, <span class="st">"Metro Area"</span><span class="op">)</span>, <span class="st">" between 2014 and 2018"</span>
      <span class="op">)</span>
    <span class="op">)</span>

<span class="va">top_move_in</span> <span class="op"><a href="https://rdrr.io/pkg/mapdeck/man/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/pkg/mapdeck/man/mapdeck.html" class="external-link">mapdeck</a></span><span class="op">(</span>style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/mapdeck/man/mapdeck_style.html" class="external-link">mapdeck_style</a></span><span class="op">(</span><span class="st">"dark"</span><span class="op">)</span>, pitch <span class="op">=</span> <span class="fl">45</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/mapdeck/man/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/pkg/mapdeck/man/add_arc.html" class="external-link">add_arc</a></span><span class="op">(</span>
    origin <span class="op">=</span> <span class="st">"centroid1"</span>,
    destination <span class="op">=</span> <span class="st">"centroid2"</span>,
    stroke_width <span class="op">=</span> <span class="st">"width"</span>,
    auto_highlight <span class="op">=</span> <span class="cn">TRUE</span>,
    highlight_colour <span class="op">=</span> <span class="st">"#8c43facc"</span>,
    tooltip <span class="op">=</span> <span class="st">"tooltip"</span>
  <span class="op">)</span></code></pre></div>
<p><img src="img/mig-flow-map.png" alt="Migration Flow map showingpeople moving to Phoenix with arcs from the top 25 Metro areas whose width represents the number of people moving"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Kyle Walker, Matt Herman.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
