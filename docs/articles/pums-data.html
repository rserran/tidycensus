<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Working with Census microdata • tidycensus</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Working with Census microdata">
<meta property="og:description" content="tidycensus">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidycensus</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.4.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basic-usage.html">Basic usage of tidycensus</a>
    </li>
    <li>
      <a href="../articles/spatial-data.html">Spatial data in tidycensus</a>
    </li>
    <li>
      <a href="../articles/margins-of-error.html">Margins of error in the ACS</a>
    </li>
    <li>
      <a href="../articles/other-datasets.html">Other Census Bureau datasets</a>
    </li>
    <li>
      <a href="../articles/pums-data.html">Working with Census microdata</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/walkerke/tidycensus" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Working with Census microdata</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/walkerke/tidycensus/blob/HEAD/vignettes/pums-data.Rmd" class="external-link"><code>vignettes/pums-data.Rmd</code></a></small>
      <div class="hidden name"><code>pums-data.Rmd</code></div>

    </div>

    
    
<p>Most of the data available through tidycensus and the Census API is
aggregated to certain geographic levels (tract, county, state, etc.). In
other words, the data we get by executing <code><a href="../reference/get_acs.html">get_acs()</a></code> has
been summarized by the Census Bureau so that we are able to learn how
many people live in a particular county or what the median household
income of a state is. There are thousands of individual variables that
the Census aggregates and publishes in tabular form.</p>
<p>For many purposes, these pre-aggregated tables have enough
information to work with. But, the Census Bureau also releases
<strong>microdata</strong> from the American Community Survey. Microdata
is the individual-level responses to the ACS that is used to create the
summary and detail tables the Census publishes. Instead of a getting one
row per state from a table, we can get one row per respondent. For the
American Community Survey, this data is called the <a href="https://www.census.gov/programs-surveys/acs/microdata.html" class="external-link"><strong>Public
Use Microdata Sample</strong> (PUMS)</a>.</p>
<p>Using PUMS data instead of the published tables can be a very
powerful tool. It can, for instance, allow you to create custom
estimates that aren’t available in pre-aggregated tables. You can also
use microdata to fit models on individual-level data instead of modeling
block groups or census tracts.</p>
<p>Until recently, PUMS data was only available from the <a href="https://www2.census.gov/programs-surveys/acs/data/pums/2018/1-Year/" class="external-link">Census
Bureau FTP site</a> and was somewhat cumbersome to use. Now, PUMS data
is available via web API, which means you can easily access it in R by
using tidycensus.</p>
<div class="section level2">
<h2 id="pumas">PUMAs<a class="anchor" aria-label="anchor" href="#pumas"></a>
</h2>
<p>One trade-off with using PUMS data as compared to aggregated data is
that you only get the state and <a href="https://www.census.gov/programs-surveys/geography/guidance/geo-areas/pumas.html" class="external-link">public
use microdata area (PUMA)</a> of each individual in the microdata. PUMAs
are Census geographies that contain at least 100,000 people and are
entirely within a single state. They are built from census tracts and
counties and may or may not be similar to other recognized geographic
boundaries. In New York City, for instance, PUMAs are closely aligned to
<a href="https://www1.nyc.gov/assets/planning/download/pdf/data-maps/nyc-population/census2010/puma_cd_map.pdf" class="external-link">Community
Districts</a>. So, if you are interested in pulling data about block
groups, census tracts, or other small areas, you can’t use PUMS
data.</p>
</div>
<div class="section level2">
<h2 id="pums-data-dictionaries">PUMS data dictionaries<a class="anchor" aria-label="anchor" href="#pums-data-dictionaries"></a>
</h2>
<p>The first place to start is to identify the variables you want to
download. There are hundreds of PUMS variables and each describes
characteristics of a person or a housing unit.
<code>pums_variables</code> is a dataset built into tidycensus that
contains names, descriptions, codes, and other metadata about the PUMS
variables.</p>
<p>Because PUMS variables and codes can change slightly by year, you
should select which year’s data you will be working with and filter
<code>pums_variables</code> for only that year and survey. In the
following example, we will be working with the 2018 1-year American
Community Survey.</p>
<p>Later in this vignette, we use the <a href="http://r-survey.r-forge.r-project.org/survey/" class="external-link"><strong>survey</strong></a>
and <a href="http://gdfe.co/srvyr/" class="external-link"><strong>srvyr</strong></a> to
calculate PUMS estimates, so if you want to follow along and you don’t
already have them installed, you should install these two packages from
CRAN.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"survey"</span>, <span class="st">"srvyr"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://walker-data.com/tidycensus/" class="external-link">tidycensus</a></span><span class="op">)</span>

<span class="va">pums_vars_2018</span> <span class="op">&lt;-</span> <span class="va">pums_variables</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2018</span>, <span class="va">survey</span> <span class="op">==</span> <span class="st">"acs1"</span><span class="op">)</span></code></pre></div>
<p><code>pums_variables</code> contains both the variables as well as
their possible values. So let’s just look at the unique variables.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pums_vars_2018</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">var_code</span>, <span class="va">var_label</span>, <span class="va">data_type</span>, <span class="va">level</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 513 × 4</span></span>
<span class="co">##   var_code var_label                                                                      data_type level</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> SERIALNO Housing unit/GQ person serial number                                           chr       <span style="color: #BB0000;">NA</span>   </span>
<span class="co">## <span style="color: #BCBCBC;">2</span> DIVISION Division code based on 2010 Census definitions                                 chr       <span style="color: #BB0000;">NA</span>   </span>
<span class="co">## <span style="color: #BCBCBC;">3</span> PUMA     Public use microdata area code (PUMA) based on 2010 Census definition (areas … chr       <span style="color: #BB0000;">NA</span>   </span>
<span class="co">## <span style="color: #BCBCBC;">4</span> REGION   Region code based on 2010 Census definitions                                   chr       <span style="color: #BB0000;">NA</span>   </span>
<span class="co">## <span style="color: #BCBCBC;">5</span> ST       State Code based on 2010 Census definitions                                    chr       <span style="color: #BB0000;">NA</span>   </span>
<span class="co">## <span style="color: #949494;"># ℹ 508 more rows</span></span></code></pre>
<p>If you’re new to PUMS data, this is a good dataset to browse to get a
feel for what variables are available.</p>
</div>
<div class="section level2">
<h2 id="person-vs--housing-unit">Person vs. housing unit<a class="anchor" aria-label="anchor" href="#person-vs--housing-unit"></a>
</h2>
<p>Some PUMS variables relate to individuals (e.g. age, race,
educational attainment) while others relate to households/housing units
(e.g. number of bedrooms, electricity cost, property value).</p>
<p>Individuals in PUMS data are always nested within a housing unit (The
ACS is sent to an housing unit address and all people living in that
unit complete the survey.) Housing units are uniquely identified by the
<code>SERIALNO</code> variable and persons are uniquely identified by
the combination of <code>SERIALNO</code> and <code>SPORDER</code>. In
the data dictionary included in tidycensus, variables are identified as
either “housing” or “person” variables in the level column. Here, for
example, are the first five person-level variables in the data
dictionary.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pums_vars_2018</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">var_code</span>, <span class="va">var_label</span>, <span class="va">data_type</span>, <span class="va">level</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">level</span> <span class="op">==</span> <span class="st">"person"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 279 × 4</span></span>
<span class="co">##   var_code var_label                       data_type level </span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="co">## <span style="color: #BCBCBC;">1</span> SPORDER  Person number                   num       person</span>
<span class="co">## <span style="color: #BCBCBC;">2</span> PWGTP    Person's weight                 num       person</span>
<span class="co">## <span style="color: #BCBCBC;">3</span> AGEP     Age                             num       person</span>
<span class="co">## <span style="color: #BCBCBC;">4</span> CIT      Citizenship status              chr       person</span>
<span class="co">## <span style="color: #BCBCBC;">5</span> CITWP    Year of naturalization write-in num       person</span>
<span class="co">## <span style="color: #949494;"># ℹ 274 more rows</span></span></code></pre>
<p>It is important to be mindful of whether the variables you choose to
analyze are person- or household-level variables.</p>
</div>
<div class="section level2">
<h2 id="using-get_pums-to-download-pums-data">Using <code>get_pums()</code> to download PUMS data<a class="anchor" aria-label="anchor" href="#using-get_pums-to-download-pums-data"></a>
</h2>
<p>To download PUMS data from the Census API, use the
<code><a href="../reference/get_pums.html">get_pums()</a></code> function. If you’ve used other
<code>get_*()</code> functions in tidycensus, it should be familiar to
you. The key arguments to specify are <code>variables</code>,
<code>state</code>, <code>survey</code>, and <code>year</code>. Here we
get <code>PUMA</code>, <code>SEX</code>, <code>AGEP</code>, and
<code>SCHL</code> variables for Vermont from the 2018 1-year ACS.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vt_pums</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_pums.html">get_pums</a></span><span class="op">(</span>
  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PUMA"</span>, <span class="st">"SEX"</span>, <span class="st">"AGEP"</span>, <span class="st">"SCHL"</span><span class="op">)</span>,
  state <span class="op">=</span> <span class="st">"VT"</span>,
  survey <span class="op">=</span> <span class="st">"acs1"</span>,
  year <span class="op">=</span> <span class="fl">2018</span>
  <span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vt_pums</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 6,436 × 9</span></span>
<span class="co">##   SERIALNO      SPORDER  WGTP PWGTP  AGEP PUMA  ST    SCHL  SEX  </span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> 2018GQ0001230       1     0     3    26 00300 50    20    1    </span>
<span class="co">## <span style="color: #BCBCBC;">2</span> 2018GQ0002135       1     0    64    18 00100 50    19    2    </span>
<span class="co">## <span style="color: #BCBCBC;">3</span> 2018GQ0002999       1     0    62    20 00400 50    19    2    </span>
<span class="co">## <span style="color: #BCBCBC;">4</span> 2018GQ0004077       1     0    16    94 00200 50    21    2    </span>
<span class="co">## <span style="color: #BCBCBC;">5</span> 2018GQ0006486       1     0    26    20 00400 50    19    1    </span>
<span class="co">## <span style="color: #949494;"># ℹ 6,431 more rows</span></span></code></pre>
<p>We get 6436 rows and 9 columns. In addition to the variables we
specified, <code><a href="../reference/get_pums.html">get_pums()</a></code> also always returns
<code>SERIALNO</code>, <code>SPORDER</code>, <code>WGTP</code>,
<code>PWGTP</code>, and <code>ST</code>. <code>SERIALNO</code> and
<code>SPORDER</code> are the variables that uniquely identify
observations, <code>WGTP</code> and <code>PWGTP</code> are the
housing-unit and person weights, and <code>ST</code> is the state
code.</p>
<p>Notice that <code>ST</code>, <code>SEX</code> and <code>SCHL</code>
return coded character variables. You can look up what these codes
represent in the <code>pums_variables</code> dataset provided or set
<code>recode = TRUE</code> in <code><a href="../reference/get_pums.html">get_pums()</a></code> to return
additional columns with the values of these variables recoded.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vt_pums_recoded</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_pums.html">get_pums</a></span><span class="op">(</span>
  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PUMA"</span>, <span class="st">"SEX"</span>, <span class="st">"AGEP"</span>, <span class="st">"SCHL"</span><span class="op">)</span>,
  state <span class="op">=</span> <span class="st">"VT"</span>,
  survey <span class="op">=</span> <span class="st">"acs1"</span>,
  year <span class="op">=</span> <span class="fl">2018</span>,
  recode <span class="op">=</span> <span class="cn">TRUE</span>
  <span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vt_pums_recoded</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 6,436 × 12</span></span>
<span class="co">##   SERIALNO      SPORDER  WGTP PWGTP  AGEP PUMA  ST    SCHL  SEX   ST_label   SCHL_label         SEX_label</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>    </span>
<span class="co">## <span style="color: #BCBCBC;">1</span> 2018GQ0001230       1     0     3    26 00300 50    20    1     Vermont/VT Associate's degree Male     </span>
<span class="co">## <span style="color: #BCBCBC;">2</span> 2018GQ0002135       1     0    64    18 00100 50    19    2     Vermont/VT 1 or more years o… Female   </span>
<span class="co">## <span style="color: #BCBCBC;">3</span> 2018GQ0002999       1     0    62    20 00400 50    19    2     Vermont/VT 1 or more years o… Female   </span>
<span class="co">## <span style="color: #BCBCBC;">4</span> 2018GQ0004077       1     0    16    94 00200 50    21    2     Vermont/VT Bachelor's degree  Female   </span>
<span class="co">## <span style="color: #BCBCBC;">5</span> 2018GQ0006486       1     0    26    20 00400 50    19    1     Vermont/VT 1 or more years o… Male     </span>
<span class="co">## <span style="color: #949494;"># ℹ 6,431 more rows</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="analyzing-pums-data">Analyzing PUMS data<a class="anchor" aria-label="anchor" href="#analyzing-pums-data"></a>
</h2>
<p>Remember that PUMS data is a sample of about 1% of the US population.
When we want to estimate a variable that represents the entire
population rather than a sample, we have to apply a weighting
adjustment. A simple way to think about PUMS weights is that for each
observation in the sample, the weight variable tells us the number of
people in the population that the observation represents. So, if we
simply add up all the person weights in our VT PUMS data, we get the
(estimated) population of Vermont.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">vt_pums_recoded</span><span class="op">$</span><span class="va">PWGTP</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [1] 626299</span></code></pre>
<p>Another convenient approach to weighting PUMS data is to use the
<code>wt</code> argument in <code><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">dplyr::count()</a></code>. Here, we
calculate the population by sex for each PUMA in Vermont (there are only
four in the whole state!).</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vt_pums_recoded</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">PUMA</span>, <span class="va">SEX_label</span>, wt <span class="op">=</span> <span class="va">PWGTP</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 8 × 3</span></span>
<span class="co">##   PUMA  SEX_label      n</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> 00100 Male      <span style="text-decoration: underline;">108</span>732</span>
<span class="co">## <span style="color: #BCBCBC;">2</span> 00100 Female    <span style="text-decoration: underline;">111</span>564</span>
<span class="co">## <span style="color: #BCBCBC;">3</span> 00200 Male       <span style="text-decoration: underline;">73</span>768</span>
<span class="co">## <span style="color: #BCBCBC;">4</span> 00200 Female     <span style="text-decoration: underline;">73</span>416</span>
<span class="co">## <span style="color: #BCBCBC;">5</span> 00300 Male       <span style="text-decoration: underline;">61</span>601</span>
<span class="co">## <span style="color: #BCBCBC;">6</span> 00300 Female     <span style="text-decoration: underline;">64</span>806</span>
<span class="co">## <span style="color: #BCBCBC;">7</span> 00400 Male       <span style="text-decoration: underline;">65</span>675</span>
<span class="co">## <span style="color: #BCBCBC;">8</span> 00400 Female     <span style="text-decoration: underline;">66</span>737</span></code></pre>
<p>Many of the variables included in the PUMS data are categorical and
we might want to group some categories together and estimate the
proportion of the population with these characteristics. In this
example, we first create a new variable that is whether or not the
person has a Bachelor’s degree or above, group by PUMA and sex, then
calculate the total population, average age, total with BA or above
(only for people 25 and older), and percent with BA or above.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vt_pums_recoded</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>ba_above <span class="op">=</span> <span class="va">SCHL</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"21"</span>, <span class="st">"22"</span>, <span class="st">"23"</span>, <span class="st">"24"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">PUMA</span>, <span class="va">SEX_label</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>
    total_pop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">PWGTP</span><span class="op">)</span>,
    mean_age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/weighted.mean.html" class="external-link">weighted.mean</a></span><span class="op">(</span><span class="va">AGEP</span>, <span class="va">PWGTP</span><span class="op">)</span>,
    ba_above <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">PWGTP</span><span class="op">[</span><span class="va">ba_above</span> <span class="op">==</span> <span class="cn">TRUE</span> <span class="op">&amp;</span> <span class="va">AGEP</span> <span class="op">&gt;=</span> <span class="fl">25</span><span class="op">]</span><span class="op">)</span>,
    ba_above_pct <span class="op">=</span> <span class="va">ba_above</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">PWGTP</span><span class="op">[</span><span class="va">AGEP</span> <span class="op">&gt;=</span> <span class="fl">25</span><span class="op">]</span><span class="op">)</span>
  <span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 8 × 6</span></span>
<span class="co">## <span style="color: #949494;"># Groups:   PUMA [4]</span></span>
<span class="co">##   PUMA  SEX_label total_pop mean_age ba_above ba_above_pct</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> 00100 Male         <span style="text-decoration: underline;">108</span>732     38.2    <span style="text-decoration: underline;">34</span>113        0.469</span>
<span class="co">## <span style="color: #BCBCBC;">2</span> 00100 Female       <span style="text-decoration: underline;">111</span>564     40.4    <span style="text-decoration: underline;">36</span>873        0.473</span>
<span class="co">## <span style="color: #BCBCBC;">3</span> 00200 Male          <span style="text-decoration: underline;">73</span>768     41.4    <span style="text-decoration: underline;">15</span>831        0.303</span>
<span class="co">## <span style="color: #BCBCBC;">4</span> 00200 Female        <span style="text-decoration: underline;">73</span>416     43.6    <span style="text-decoration: underline;">20</span>248        0.367</span>
<span class="co">## <span style="color: #BCBCBC;">5</span> 00300 Male          <span style="text-decoration: underline;">61</span>601     43.7    <span style="text-decoration: underline;">14</span>869        0.326</span>
<span class="co">## <span style="color: #BCBCBC;">6</span> 00300 Female        <span style="text-decoration: underline;">64</span>806     45.0    <span style="text-decoration: underline;">21</span>527        0.434</span>
<span class="co">## <span style="color: #BCBCBC;">7</span> 00400 Male          <span style="text-decoration: underline;">65</span>675     41.9    <span style="text-decoration: underline;">12</span>788        0.278</span>
<span class="co">## <span style="color: #BCBCBC;">8</span> 00400 Female        <span style="text-decoration: underline;">66</span>737     44.6    <span style="text-decoration: underline;">18</span>980        0.391</span></code></pre>
</div>
<div class="section level2">
<h2 id="calculating-standard-errors">Calculating standard errors<a class="anchor" aria-label="anchor" href="#calculating-standard-errors"></a>
</h2>
<p>In the previous examples, you might have noticed that we calculate a
point estimate, but do not get a standard error or margin of error as is
included in aggregated Census tables. It is important to calculate
standard errors when making custom estimates using PUMS data, because it
can be easy to create a very small sub-group where there are not enough
observations in the sample to make a reliable estimate.</p>
<p>The standard package for calculating estimates and fitting models
with complex survey objects is the <a href="http://r-survey.r-forge.r-project.org/survey/" class="external-link"><strong>survey</strong>
package</a>. The <a href="http://gdfe.co/srvyr/index.html" class="external-link"><strong>srvyr</strong>
package</a> is an alternative and wraps some survey functions to allow
for analyzing surveys using <strong>dplyr</strong>-style syntax.
tidycensus provides a function, <code><a href="../reference/to_survey.html">to_survey()</a></code>, that converts
data frames returned by <code><a href="../reference/get_pums.html">get_pums()</a></code> into either a survey or
srvyr object.</p>
<p>In order to generate reliable standard errors, the Census Bureau
provides a set of <a href="https://usa.ipums.org/usa/repwt.shtml" class="external-link">replicate weights</a> for
each observation in the PUMS dataset. These replicate weights are used
to simulate multiple samples from the single PUMS sample and can be used
to calculate more precise standard errors. PUMS data contains both
person- and housing-unit-level replicate weights.</p>
<p>To download replicate weights along with PUMS data, set the
<code>rep_weights</code> argument in <code><a href="../reference/get_pums.html">get_pums()</a></code> to
<code>"person"</code>, <code>"housing"</code>, or <code>"both"</code>.
Here we get the same Vermont PUMS data as above in addition to the 80
person replicate weight columns.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vt_pums_rep_weights</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_pums.html">get_pums</a></span><span class="op">(</span>
  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PUMA"</span>, <span class="st">"SEX"</span>, <span class="st">"AGEP"</span>, <span class="st">"SCHL"</span><span class="op">)</span>,
  state <span class="op">=</span> <span class="st">"VT"</span>,
  survey <span class="op">=</span> <span class="st">"acs1"</span>,
  year <span class="op">=</span> <span class="fl">2018</span>,
  recode <span class="op">=</span> <span class="cn">TRUE</span>,
  rep_weights <span class="op">=</span> <span class="st">"person"</span>
  <span class="op">)</span></code></pre></div>
<p>To easily convert this data frame to a survey or srvyr object, we can
use the <code><a href="../reference/to_survey.html">to_survey()</a></code> function.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vt_survey_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/to_survey.html">to_survey</a></span><span class="op">(</span><span class="va">vt_pums_rep_weights</span><span class="op">)</span></code></pre></div>
<p>By default, <code><a href="../reference/to_survey.html">to_survey()</a></code> converts a data frame to a
<code>tbl_svy</code> object by using person replicate weights. You can
change the arguments in <code>to_survey</code> if you are analyzing
housing-unit data (<code>type = "housing"</code>) or if you want a
survey object instead of a srvyr object. (Although, <code>tbl_svy</code>
objects also have a svyrep.design class so you can <a href="http://gdfe.co/srvyr/articles/srvyr-vs-survey.html#using-survey-functions-on-srvyr-objects" class="external-link">use
survey functions on srvyr objects</a>.)</p>
<p>Now, with our srvyr design object defined, we can calculate the same
estimates as above, but we now get column with standard errors as
well.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://gdfe.co/srvyr/" class="external-link">srvyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="va">vt_survey_design</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="http://gdfe.co/srvyr/reference/survey_tally.html" class="external-link">survey_count</a></span><span class="op">(</span><span class="va">PUMA</span>, <span class="va">SEX_label</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 8 × 4</span></span>
<span class="co">##   PUMA  SEX_label      n  n_se</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> 00100 Male      <span style="text-decoration: underline;">108</span>732 <span style="text-decoration: underline;">1</span>123.</span>
<span class="co">## <span style="color: #BCBCBC;">2</span> 00100 Female    <span style="text-decoration: underline;">111</span>564 <span style="text-decoration: underline;">1</span>360.</span>
<span class="co">## <span style="color: #BCBCBC;">3</span> 00200 Male       <span style="text-decoration: underline;">73</span>768  754.</span>
<span class="co">## <span style="color: #BCBCBC;">4</span> 00200 Female     <span style="text-decoration: underline;">73</span>416  809.</span>
<span class="co">## <span style="color: #BCBCBC;">5</span> 00300 Male       <span style="text-decoration: underline;">61</span>601  491.</span>
<span class="co">## <span style="color: #BCBCBC;">6</span> 00300 Female     <span style="text-decoration: underline;">64</span>806  578.</span>
<span class="co">## <span style="color: #BCBCBC;">7</span> 00400 Male       <span style="text-decoration: underline;">65</span>675  702.</span>
<span class="co">## <span style="color: #BCBCBC;">8</span> 00400 Female     <span style="text-decoration: underline;">66</span>737  776.</span></code></pre>
<p>The srvyr syntax is very similar to standard dplyr syntax, so this
should look familiar; we’ve swapped out <code><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count()</a></code> for
<code><a href="http://gdfe.co/srvyr/reference/survey_tally.html" class="external-link">survey_count()</a></code> and we don’t need a <code>wt</code> argument
because we defined the weights when we set up the srvyr object.</p>
<p>The equivalent estimate using survey syntax looks like this:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">survey</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyby.html" class="external-link">svyby</a></span><span class="op">(</span><span class="op">~</span><span class="va">SEX_label</span>, <span class="op">~</span><span class="va">PUMA</span>, design <span class="op">=</span> <span class="va">vt_survey_design</span>, <span class="fu">survey</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/survey/man/surveysummary.html" class="external-link">svytotal</a></span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##        PUMA SEX_labelMale SEX_labelFemale       se1       se2</span>
<span class="co">## 00100 00100        108732          111564 1122.9765 1360.3476</span>
<span class="co">## 00200 00200         73768           73416  754.0906  808.7364</span>
<span class="co">## 00300 00300         61601           64806  490.5432  578.3529</span>
<span class="co">## 00400 00400         65675           66737  702.0659  775.9812</span></code></pre>
<p>We can also repeat the estimate we did above and calculate the
percentage of people that are 25 and up with a bachelor’s degree, while
this time returning the upper and lower bounds of the confidence
interval for these estimates. This time though, we have to subset our
data frame to only those 25 and older before we summarize.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vt_survey_design</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="http://gdfe.co/srvyr/reference/dplyr_single.html" class="external-link">mutate</a></span><span class="op">(</span>ba_above <span class="op">=</span> <span class="va">SCHL</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"21"</span>, <span class="st">"22"</span>, <span class="st">"23"</span>, <span class="st">"24"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="http://gdfe.co/srvyr/reference/dplyr_single.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">AGEP</span> <span class="op">&gt;=</span> <span class="fl">25</span><span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="http://gdfe.co/srvyr/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">PUMA</span>, <span class="va">SEX_label</span><span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="http://gdfe.co/srvyr/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>
    age_25_up <span class="op">=</span> <span class="fu"><a href="http://gdfe.co/srvyr/reference/survey_total.html" class="external-link">survey_total</a></span><span class="op">(</span>vartype <span class="op">=</span> <span class="st">"ci"</span><span class="op">)</span>,
    ba_above_n <span class="op">=</span> <span class="fu"><a href="http://gdfe.co/srvyr/reference/survey_total.html" class="external-link">survey_total</a></span><span class="op">(</span><span class="va">ba_above</span>, vartype <span class="op">=</span> <span class="st">"ci"</span><span class="op">)</span>,
    ba_above_pct <span class="op">=</span> <span class="fu"><a href="http://gdfe.co/srvyr/reference/survey_mean.html" class="external-link">survey_mean</a></span><span class="op">(</span><span class="va">ba_above</span>, vartype <span class="op">=</span> <span class="st">"ci"</span><span class="op">)</span>
    <span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 8 × 11</span></span>
<span class="co">## <span style="color: #949494;"># Groups:   PUMA [4]</span></span>
<span class="co">##   PUMA  SEX_label age_25_up age_25_up_low age_25_up_upp ba_above_n ba_above_n_low ba_above_n_upp</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> 00100 Male          <span style="text-decoration: underline;">72</span>680        <span style="text-decoration: underline;">70</span>216.        <span style="text-decoration: underline;">75</span>144.      <span style="text-decoration: underline;">34</span>113         <span style="text-decoration: underline;">29</span>913.         <span style="text-decoration: underline;">38</span>313.</span>
<span class="co">## <span style="color: #BCBCBC;">2</span> 00100 Female        <span style="text-decoration: underline;">77</span>966        <span style="text-decoration: underline;">75</span>671.        <span style="text-decoration: underline;">80</span>261.      <span style="text-decoration: underline;">36</span>873         <span style="text-decoration: underline;">32</span>202.         <span style="text-decoration: underline;">41</span>544.</span>
<span class="co">## <span style="color: #BCBCBC;">3</span> 00200 Male          <span style="text-decoration: underline;">52</span>278        <span style="text-decoration: underline;">50</span>826.        <span style="text-decoration: underline;">53</span>730.      <span style="text-decoration: underline;">15</span>831         <span style="text-decoration: underline;">13</span>327.         <span style="text-decoration: underline;">18</span>335.</span>
<span class="co">## <span style="color: #BCBCBC;">4</span> 00200 Female        <span style="text-decoration: underline;">55</span>162        <span style="text-decoration: underline;">53</span>643.        <span style="text-decoration: underline;">56</span>681.      <span style="text-decoration: underline;">20</span>248         <span style="text-decoration: underline;">17</span>679.         <span style="text-decoration: underline;">22</span>817.</span>
<span class="co">## <span style="color: #BCBCBC;">5</span> 00300 Male          <span style="text-decoration: underline;">45</span>634        <span style="text-decoration: underline;">44</span>743.        <span style="text-decoration: underline;">46</span>525.      <span style="text-decoration: underline;">14</span>869         <span style="text-decoration: underline;">12</span>638.         <span style="text-decoration: underline;">17</span>100.</span>
<span class="co">## <span style="color: #BCBCBC;">6</span> 00300 Female        <span style="text-decoration: underline;">49</span>546        <span style="text-decoration: underline;">48</span>576.        <span style="text-decoration: underline;">50</span>516.      <span style="text-decoration: underline;">21</span>527         <span style="text-decoration: underline;">19</span>010.         <span style="text-decoration: underline;">24</span>044.</span>
<span class="co">## <span style="color: #BCBCBC;">7</span> 00400 Male          <span style="text-decoration: underline;">45</span>960        <span style="text-decoration: underline;">45</span>067.        <span style="text-decoration: underline;">46</span>853.      <span style="text-decoration: underline;">12</span>788         <span style="text-decoration: underline;">10</span>699.         <span style="text-decoration: underline;">14</span>877.</span>
<span class="co">## <span style="color: #BCBCBC;">8</span> 00400 Female        <span style="text-decoration: underline;">48</span>601        <span style="text-decoration: underline;">47</span>783.        <span style="text-decoration: underline;">49</span>419.      <span style="text-decoration: underline;">18</span>980         <span style="text-decoration: underline;">16</span>540.         <span style="text-decoration: underline;">21</span>420.</span>
<span class="co">## <span style="color: #949494;"># ℹ 3 more variables: ba_above_pct &lt;dbl&gt;, ba_above_pct_low &lt;dbl&gt;, ba_above_pct_upp &lt;dbl&gt;</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="modeling-with-pums-data">Modeling with PUMS data<a class="anchor" aria-label="anchor" href="#modeling-with-pums-data"></a>
</h2>
<p>An important use case for PUMS data is doing regression analysis or
other modeling. Let’s try to predict the length of an individual’s
commute to work (<code>JWMNP</code>) based on their wages, employer type
(private, public, self), and which PUMA they live in. We’ll use the 2018
5-year estimates so we have a bigger sample to work with.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vt_pums_to_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_pums.html">get_pums</a></span><span class="op">(</span>
  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PUMA"</span>, <span class="st">"WAGP"</span>, <span class="st">"JWMNP"</span>, <span class="st">"JWTR"</span>, <span class="st">"COW"</span>, <span class="st">"ESR"</span><span class="op">)</span>,
  state <span class="op">=</span> <span class="st">"VT"</span>,
  survey <span class="op">=</span> <span class="st">"acs5"</span>,
  year <span class="op">=</span> <span class="fl">2018</span>,
  rep_weights <span class="op">=</span> <span class="st">"person"</span>
  <span class="op">)</span></code></pre></div>
<p>Now, we filter out observations that aren’t relevant, do a little
recoding of the class of worker variable, and finally convert the data
frame to a survey design object.
<!-- Note that we did not request replicate weights from the API, so we specify `design = "cluster"` when we create the survey design. This creates the survey using a cluster design with the household (`SERIALNO`) as the primary sampling unit, the PUMA as the strata, and `PWGTP` as the weight. --></p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vt_model_sd</span> <span class="op">&lt;-</span> <span class="va">vt_pums_to_model</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="http://gdfe.co/srvyr/reference/dplyr_single.html" class="external-link">filter</a></span><span class="op">(</span>
    <span class="va">ESR</span> <span class="op">==</span> <span class="fl">1</span>,   <span class="co"># civilian employed</span>
    <span class="va">JWTR</span> <span class="op">!=</span> <span class="fl">11</span>, <span class="co"># does not work at home</span>
    <span class="va">WAGP</span> <span class="op">&gt;</span> <span class="fl">0</span>,   <span class="co"># earned wages last year</span>
    <span class="va">JWMNP</span> <span class="op">&gt;</span> <span class="fl">0</span>   <span class="co"># commute more than zero min</span>
    <span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="http://gdfe.co/srvyr/reference/dplyr_single.html" class="external-link">mutate</a></span><span class="op">(</span>
    emp_type <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span>
      <span class="va">COW</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"2"</span><span class="op">)</span>      <span class="op">~</span> <span class="st">"private"</span>,
      <span class="va">COW</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"3"</span>, <span class="st">"4"</span>, <span class="st">"5"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"public"</span>,
      <span class="cn">TRUE</span>                      <span class="op">~</span> <span class="st">"self"</span>
      <span class="op">)</span>
    <span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="../reference/to_survey.html">to_survey</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Let’s quickly check out some summary stats using
<code>srvyr</code>.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vt_model_sd</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="http://gdfe.co/srvyr/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>
    n              <span class="op">=</span> <span class="fu"><a href="http://gdfe.co/srvyr/reference/survey_total.html" class="external-link">survey_total</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,
    mean_wage      <span class="op">=</span> <span class="fu"><a href="http://gdfe.co/srvyr/reference/survey_mean.html" class="external-link">survey_mean</a></span><span class="op">(</span><span class="va">WAGP</span><span class="op">)</span>,
    median_wage    <span class="op">=</span> <span class="fu"><a href="http://gdfe.co/srvyr/reference/survey_quantile.html" class="external-link">survey_median</a></span><span class="op">(</span><span class="va">WAGP</span><span class="op">)</span>,
    mean_commute   <span class="op">=</span> <span class="fu"><a href="http://gdfe.co/srvyr/reference/survey_mean.html" class="external-link">survey_mean</a></span><span class="op">(</span><span class="va">JWMNP</span><span class="op">)</span>,
    median_commute <span class="op">=</span> <span class="fu"><a href="http://gdfe.co/srvyr/reference/survey_quantile.html" class="external-link">survey_median</a></span><span class="op">(</span><span class="va">JWMNP</span><span class="op">)</span>
    <span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 1 × 10</span></span>
<span class="co">##        n  n_se mean_wage mean_wage_se median_wage median_wage_se mean_commute mean_commute_se</span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> <span style="text-decoration: underline;">282</span>733 <span style="text-decoration: underline;">1</span>933.    <span style="text-decoration: underline;">44</span>601.         437.       <span style="text-decoration: underline;">35</span>000           251.         23.3           0.233</span>
<span class="co">## <span style="color: #949494;"># ℹ 2 more variables: median_commute &lt;dbl&gt;, median_commute_se &lt;dbl&gt;</span></span></code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vt_model_sd</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="http://gdfe.co/srvyr/reference/survey_tally.html" class="external-link">survey_count</a></span><span class="op">(</span><span class="va">emp_type</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 3 × 3</span></span>
<span class="co">##   emp_type      n  n_se</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> private  <span style="text-decoration: underline;">224</span>760 <span style="text-decoration: underline;">2</span>001.</span>
<span class="co">## <span style="color: #BCBCBC;">2</span> public    <span style="text-decoration: underline;">42</span>966 <span style="text-decoration: underline;">1</span>374.</span>
<span class="co">## <span style="color: #BCBCBC;">3</span> self      <span style="text-decoration: underline;">15</span>007  756.</span></code></pre>
<p>And now we’re ready to fit a simple linear regression model.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu">survey</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyglm.html" class="external-link">svyglm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">JWMNP</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">WAGP</span><span class="op">)</span> <span class="op">+</span> <span class="va">emp_type</span> <span class="op">+</span> <span class="va">PUMA</span>, design <span class="op">=</span> <span class="va">vt_model_sd</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## </span>
<span class="co">## Call:</span>
<span class="co">## survey::svyglm(formula = log(JWMNP) ~ log(WAGP) + emp_type + </span>
<span class="co">##     PUMA, design = vt_model_sd)</span>
<span class="co">## </span>
<span class="co">## Survey design:</span>
<span class="co">## Called via srvyr</span>
<span class="co">## </span>
<span class="co">## Coefficients:</span>
<span class="co">##                 Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="co">## (Intercept)     1.699601   0.102181  16.633  &lt; 2e-16 ***</span>
<span class="co">## log(WAGP)       0.113913   0.009548  11.931  &lt; 2e-16 ***</span>
<span class="co">## emp_typepublic -0.052845   0.027420  -1.927   0.0578 .  </span>
<span class="co">## emp_typeself   -0.306227   0.050016  -6.123 4.20e-08 ***</span>
<span class="co">## PUMA00200       0.007800   0.023943   0.326   0.7455    </span>
<span class="co">## PUMA00300       0.023629   0.025111   0.941   0.3498    </span>
<span class="co">## PUMA00400      -0.117300   0.026028  -4.507 2.46e-05 ***</span>
<span class="co">## ---</span>
<span class="co">## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span>
<span class="co">## </span>
<span class="co">## (Dispersion parameter for gaussian family taken to be 9328.921)</span>
<span class="co">## </span>
<span class="co">## Number of Fisher Scoring iterations: 2</span></code></pre>
</div>
<div class="section level2">
<h2 id="mapping-pums-data">Mapping PUMS data<a class="anchor" aria-label="anchor" href="#mapping-pums-data"></a>
</h2>
<p>If you’ve used the spatial functionality in tidycensus before, you
might also want to put your custom PUMS estimates on a map. To do this,
let’s use <code>tigris</code> to download PUMA boundaries for the states
in New England as an <code>sf</code> object.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ne_states</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VT"</span>, <span class="st">"NH"</span>, <span class="st">"ME"</span>, <span class="st">"MA"</span>, <span class="st">"CT"</span>, <span class="st">"RI"</span><span class="op">)</span>
<span class="va">ne_pumas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">ne_states</span>, <span class="fu">tigris</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/tigris/man/pumas.html" class="external-link">pumas</a></span>, class <span class="op">=</span> <span class="st">"sf"</span>, cb <span class="op">=</span> <span class="cn">TRUE</span>, year <span class="op">=</span> <span class="fl">2018</span><span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://purrr.tidyverse.org/reference/reduce.html" class="external-link">reduce</a></span><span class="op">(</span><span class="va">rbind</span><span class="op">)</span></code></pre></div>
<p>Next we download the income-to-poverty ratio from the PUMS dataset
and calculate the percentage of population below 200% of the poverty
line for each PUMA.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ne_pums</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_pums.html">get_pums</a></span><span class="op">(</span>
  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PUMA"</span>, <span class="st">"POVPIP"</span><span class="op">)</span>,
  state <span class="op">=</span> <span class="va">ne_states</span>,
  survey <span class="op">=</span> <span class="st">"acs1"</span>,
  year <span class="op">=</span> <span class="fl">2018</span>
  <span class="op">)</span>

<span class="va">ne_pov</span> <span class="op">&lt;-</span> <span class="va">ne_pums</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="http://gdfe.co/srvyr/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">ST</span>, <span class="va">PUMA</span><span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="http://gdfe.co/srvyr/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>
    total_pop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">PWGTP</span><span class="op">)</span>,
    pct_in_pov <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">PWGTP</span><span class="op">[</span><span class="va">POVPIP</span> <span class="op">&lt;</span> <span class="fl">200</span><span class="op">]</span><span class="op">)</span> <span class="op">/</span> <span class="va">total_pop</span>
  <span class="op">)</span></code></pre></div>
<p>And now we can make a choropleth map by joining the PUMA boundaries
with the PUMS data.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ne_pumas</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">ne_pov</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"STATEFP10"</span> <span class="op">=</span> <span class="st">"ST"</span>, <span class="st">"PUMACE10"</span> <span class="op">=</span> <span class="st">"PUMA"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">pct_in_pov</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_b</a></span><span class="op">(</span>
    name <span class="op">=</span> <span class="cn">NULL</span>,
    option <span class="op">=</span> <span class="st">"magma"</span>,
    labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/label_percent.html" class="external-link">label_percent</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>
    <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Percentage of population below 200% of the poverty line"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="pums-data_files/figure-html/unnamed-chunk-23-1.png" width="768"></p>
</div>
<div class="section level2">
<h2 id="verification-of-pums-estimates">Verification of PUMS estimates<a class="anchor" aria-label="anchor" href="#verification-of-pums-estimates"></a>
</h2>
<p>The Census provides <a href="https://www.census.gov/programs-surveys/acs/technical-documentation/pums/documentation.2018.html" class="external-link">calculated
estimates and standard errors</a> for a number of states and variables
to ensure that users’ analysis of PUMS data matches the expected
values.</p>
<p>In the following example, we generate a few estimates using the
methodology described above. You may want to perform a similar
verification on your system to ensure your PUMS estimates will be
accurate.</p>
<p>Here are a few estimates we’ll verify from the 2018 ACS 1-year PUMS
estimates for user verification file:</p>
<table class="table">
<thead><tr class="header">
<th>State</th>
<th>Variable</th>
<th>Estimate</th>
<th>SE</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Wyoming</td>
<td>GQ institutional population (RELP=16)</td>
<td>7018</td>
<td>3</td>
</tr>
<tr class="even">
<td>Utah</td>
<td>Owned free and clear (TEN=2)</td>
<td>209632</td>
<td>3972</td>
</tr>
<tr class="odd">
<td>Hawaii</td>
<td>Age 0-4</td>
<td>86452</td>
<td>944</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wy_relp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_pums.html">get_pums</a></span><span class="op">(</span>
  variables <span class="op">=</span> <span class="st">"RELP"</span>,
  state <span class="op">=</span> <span class="st">"Wyoming"</span>,
  survey <span class="op">=</span> <span class="st">"acs1"</span>,
  year <span class="op">=</span> <span class="fl">2018</span>,
  rep_weights <span class="op">=</span> <span class="st">"person"</span>
<span class="op">)</span>

<span class="va">ut_ten</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_pums.html">get_pums</a></span><span class="op">(</span>
  variables <span class="op">=</span> <span class="st">"TEN"</span>,
  state <span class="op">=</span> <span class="st">"Utah"</span>,
  survey <span class="op">=</span> <span class="st">"acs1"</span>,
  year <span class="op">=</span> <span class="fl">2018</span>,
  rep_weights <span class="op">=</span> <span class="st">"housing"</span>
<span class="op">)</span>

<span class="va">hi_age</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_pums.html">get_pums</a></span><span class="op">(</span>
  variables <span class="op">=</span> <span class="st">"AGEP"</span>,
  state <span class="op">=</span> <span class="st">"Hawaii"</span>,
  survey <span class="op">=</span> <span class="st">"acs1"</span>,
  year <span class="op">=</span> <span class="fl">2018</span>,
  rep_weights <span class="op">=</span> <span class="st">"person"</span>
<span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wy_relp</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/to_survey.html">to_survey</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="http://gdfe.co/srvyr/reference/survey_tally.html" class="external-link">survey_count</a></span><span class="op">(</span><span class="va">RELP</span><span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="http://gdfe.co/srvyr/reference/dplyr_single.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">RELP</span> <span class="op">==</span> <span class="st">"16"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 1 × 3</span></span>
<span class="co">##   RELP      n  n_se</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> 16     <span style="text-decoration: underline;">7</span>018  2.64</span></code></pre>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ut_ten</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">SERIALNO</span>, .keep_all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="../reference/to_survey.html">to_survey</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"housing"</span><span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="http://gdfe.co/srvyr/reference/survey_tally.html" class="external-link">survey_count</a></span><span class="op">(</span><span class="va">TEN</span><span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="http://gdfe.co/srvyr/reference/dplyr_single.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">TEN</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 1 × 3</span></span>
<span class="co">##   TEN        n  n_se</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> 2     <span style="text-decoration: underline;">209</span>632 <span style="text-decoration: underline;">3</span>972.</span></code></pre>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hi_age</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="http://gdfe.co/srvyr/reference/dplyr_single.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/between.html" class="external-link">between</a></span><span class="op">(</span><span class="va">AGEP</span>, <span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/to_survey.html">to_survey</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="http://gdfe.co/srvyr/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>age_0_4 <span class="op">=</span> <span class="fu"><a href="http://gdfe.co/srvyr/reference/survey_total.html" class="external-link">survey_total</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 1 × 2</span></span>
<span class="co">##   age_0_4 age_0_4_se</span>
<span class="co">##     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span>   <span style="text-decoration: underline;">86</span>452       944.</span></code></pre>
<p>3 for 3 – yay!</p>
</div>
<div class="section level2">
<h2 id="more-resources-for-analyzing-pums-data">More resources for analyzing PUMS data<a class="anchor" aria-label="anchor" href="#more-resources-for-analyzing-pums-data"></a>
</h2>
<ul>
<li><a href="http://gdfe.co/srvyr/" class="external-link"><strong>srvyr</strong>
website</a></li>
<li><a href="http://r-survey.r-forge.r-project.org/survey/" class="external-link"><strong>survey</strong>
website</a></li>
<li><a href="https://www.census.gov/programs-surveys/acs/technical-documentation/pums.html" class="external-link">Census
Bureau PUMS documention</a></li>
<li><a href="https://usa.ipums.org/usa-action/faq" class="external-link">IPUMS FAQs</a></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Kyle Walker, Matt Herman.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
